<div class="row">
    <div class="col-sm-7">
        <h1 class="pagetitle"><span translate lib="web">detailsfor</span> {{ctrl.model.name}}</h1>
    </div>
</div>

<section>
    <div class="form-group">
        <div class="col-sm-9">
            <label class="control-label"><span translate lib="web">adduser</span>
                <select ng-model="ctrl.newuser"
                    ng-options="item as (item.name + ' ' + item.username) for item in ctrl.usergroups">
                </select>
                <button type="button" ng-click="ctrl.adduser()" ng-disabled="ctrl.loading || ctrl.newuser==null"
                    translate lib="web">insert</button>

        </div>
    </div>
</section>

<section ng-repeat="ace in ctrl.model._acl" ng-show="ctrl.collection!='files'">
    <div class="form-group">
        <div class="col-sm-9 input-group">
            <label class="col-sm-3 control-label">{{ace.name}}: </label>
            <input ng-disabled="ctrl.loading==true" type="checkbox" ng-checked="ctrl.isBitSet(ace.rights, 1)"
                ng-click="ctrl.toogleBit(ace, 1)" value="1" id="{{ace._id}}" /> create
            <input ng-disabled="ctrl.loading==true" type="checkbox" ng-checked="ctrl.isBitSet(ace.rights, 2)"
                ng-click="ctrl.toogleBit(ace, 2)" value="2" id="{{ace._id}}" /> read
            <input ng-disabled="ctrl.loading==true" type="checkbox" ng-checked="ctrl.isBitSet(ace.rights, 3)"
                ng-click="ctrl.toogleBit(ace, 3)" value="3" id="{{ace._id}}" /> update
            <input ng-disabled="ctrl.loading==true" type="checkbox" ng-checked="ctrl.isBitSet(ace.rights, 4)"
                ng-click="ctrl.toogleBit(ace, 4)" value="4" id="{{ace._id}}" /> delete
            <input ng-disabled="ctrl.loading==true" type="checkbox" ng-checked="ctrl.isBitSet(ace.rights, 5)"
                ng-click="ctrl.toogleBit(ace, 5)" value="5" id="{{ace._id}}" /> invoke
            <button type="button" ng-click="ctrl.removeuser(ace._id)" ng-disabled="ctrl.loading" translate
                lib="web">delete</button>
        </div>
    </div>
</section>


<pre ng-show="ErrorMessage!=null">{{ ErrorMessage }}</pre>
<a href="" ng-hide="ctrl.showjson==true" ng-click="ctrl.togglejson()" translate lib="web">showjson</a>
<a href="" ng-hide="ctrl.showjson==false" ng-click="ctrl.togglejson()" translate lib="web">showproperties</a>
<form ng-submit="ctrl.submit()" class="form-horizontal" role="form" autocomplete="off" ng-hide="ctrl.showjson==true">

    <section ng-repeat="key in ctrl.keys">
        <div class="form-group">
            <label class="col-sm-3 control-label"><span translate lib="web">{{ key }}</span>: <a href=""
                    ng-click="ctrl.removekey(key)" translate lib="web">delete</a></label>
            <div class="col-sm-9">
                <textarea class='autogrow form-control' rows='3' data-min-rows='3'
                    ng-model="ctrl.model[key]"></textarea>
                <!-- 
                <input ng-model="ctrl.model[key]" class="form-control input-md" ng-disabled="ctrl.loading==true" />
                -->
            </div>
        </div>
    </section>


    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" ng-disabled="ctrl.loading==true" class="btn btn-success" translate
                lib="web">save</button>
        </div>
    </div>
</form>

<form ng-submit="ctrl.submit()" class="form-horizontal" role="form" autocomplete="off" ng-hide="ctrl.showjson==false">
    <div ng-hide="ctrl.showjson==false" class="form-group" style="width: 100%;">
        <div class="form-group">
            <label class="col-sm-3 control-label" translate lib="web">json</label>
            <div class="col-sm-9">
                <!-- <textarea class="form-control" rows="5" ng-model="ctrl.jsonmodel" style="max-width: 100%;"></textarea> -->

                <textarea class='autogrow form-control' rows='3' data-min-rows='3' ng-model="ctrl.jsonmodel"></textarea>

                <!-- <textarea msd-elastic  class="form-control" ></textarea> -->
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-3 col-sm-9">
                <button type="submit" ng-disabled="ctrl.loading==true" class="btn btn-success" translate
                    lib="web">save</button>
            </div>
        </div>
    </div>
</form>